title: 固定表头以及首列的实现
categories: 前端
tags:
  - table
  - css
---

## 固定表头以及首列的实现

### 前言

最近被需求了一个交互性很复杂的表格组件，不仅包含了列行的收起展开动态配置，还有一个难点就是首列和表头要求固定。这里就说一说这一功能的一种实现。

<!-- more -->
### 固定表头

固定表头的实现可以参考下图：

![](http://img.kuaidadi.com/cms/img/upload_fdd0f6ac6caa5a8d7da510ef89638db9.png)

将表格分为两部分，上面部分只绘制表头部分，下面滚动区域使用元素包裹后设置`overflow`属性和高度达到滚动的目的。

### 固定表列

固定列的实现和表头基本一致可以参考下图：

![](http://img.kuaidadi.com/cms/img/upload_796fbaeebf6479e66afd3596c4cd7378.png)

将表格分为左右两部分，上面部分只绘制表头部分，下面滚动区域使用元素包裹后设置`overflow`属性和宽度达到滚动的目的。

不过这个只是一种实现思路，也可以通过在表列或者表头上覆盖一个单独的列或者头进行固定，相对于最外层进行绝对定位同样可以实现，这个不多说。

### 同时固定表头与表列

这种情况要复杂很多，而且还需要借助js的运算打到目的。具体实现思路图如下：

![](http://img.kuaidadi.com/cms/img/upload_3bcc91c3b97561bce89ecc04dc702fc0.png)

首先需要使用元素包裹住整个右侧区域使之进行横向滚动，然后在其内部实现固定表头的效果。

需要注意的是**其中R部分同时也要做到可滑动且跟着数据区块上下同时滑动**，这部分就需要使用js来操作两边滑动的一致性了。

起初是监听两边的`scroll`事件，然后同时设置两边`scrollTop`值来打到两边的同步。但是在实践的过程中发现由于滑动速度的问题偶现出现两列不对齐的情况造成体验上很不好的情况，尝试解决未果于是改换思路使用css`transform`进行模拟同步滚动。最后达到了比较好的效果，但是在实现两边互相一致的时候出现了`transform`与`scroll`冲突的问题，暂时未能解决于是降级方案为只能通过滚动数据区域来滚动固定的第一列。（element貌似也是一样的情况）于是乎就完成了固定表头以及首列的实现。

### DEMO

稍后补充